# Gemini 프로젝트 맥락 요약

> 이 문서는 Gemini가 프로젝트의 전체 맥락을 빠르고 정확하게 파악할 수 있도록 핵심 정보를 요약한 것입니다.

---

## 1. 🎯 프로젝트 목표 및 개요

- **프로젝트명**: 나만의 IaaS 플랫폼 (모놀리식 프로토타입)
- **한 줄 요약**: KVM/QEMU와 libvirt를 기반으로 AWS, OpenStack과 같은 클라우드 IaaS의 핵심 기능을 직접 구현하며 내부 동작 원리를 학습하는 프로젝트입니다.
- **궁극적 목표**: 클라우드 시스템의 근본 아키텍처와 동작 원리에 대한 깊은 이해를 증명하기 위해, IaaS의 핵심 기능(VM, 네트워크, 스토리지)를 직접 구현.
- **프로젝트 기한**: 2026년 4월

---

## 2. 💻 기술 스택 및 아키텍처

- **언어**: Python 3
- **백엔드**: 순수 WSGI (`wsgiref.simple_server` 기반)
- **가상화**: KVM/QEMU 및 `libvirt-python`
- **DB**: SQLite3 (메타데이터 저장용)
- **개발 환경**: Vagrant와 VirtualBox (중첩 가상화)
- **향후 도입**: ASGI, RabbitMQ/Celery (MSA 전환용), Next.js (프론트엔드)

---

## 3. 📂 디렉토리 구조

- `configs/`: VM 정의 XML 템플릿 (`vm_template.xml`)
- `docs/`: 모든 프로젝트 문서
- `src/`: 모든 파이썬 소스 코드 (`services/`, `database/`, `utils/`)
- `scripts/`: Vagrant 프로비저닝 등 스크립트 파일
- `Makefile`: 실행 명령어 단축 및 환경 관리 스크립트

---

## 4. 🗺️ 전체 로드맵

- **Phase 1 (25.10 ~ 25.11)**: 코어 기능 프로토타이핑 및 MVP 개발
- **Phase 2 (25.12 ~ 26.01)**: MSA 전환 및 네트워크 서비스 구현
- **Phase 3 (26.02)**: 핵심 자원 관리 기능 확장 (스토리지)
- **Phase 4 (26.03)**: 정책 관리 및 시스템 최적화
- **Phase 5 (26.04)**: 최종 통합 및 시연 준비

---

## 5. 🚀 현재 진행 상황 및 다음 단계

- **현재 상태**: **Phase 1 (MVP 구현 완료)**. VM 생성 API를 기반으로 제어 기능을 확장할 예정.

- **최근 완료 작업 (2025-10-01)**:
    - DB 연동 기반 VM 생성 API(POST /v1/vms) 완성.
    - 동적 XML, CoW 디스크 복제 로직을 통한 VM 동시 생성 성공.

- **다음 행동**: 
    1. **VM 삭제 API 구현**: `DELETE /v1/vms/<VM 이름>` 엔드포인트 및 관련 로직(libvirt, DB, 디스크 파일) 구현.
    2. **모니터링 기반 구축**: `GET /v1/vms` 호출 시 DB 상태와 libvirt의 실시간 상태를 병합하여 반환하도록 개선.

- **주요 기술 부채**:
    - **디스크 롤백 부재**: VM 생성 실패 시 생성된 리소스(디스크, DB 레코드)를 자동으로 정리하는 로직 필요.
    - **동기 처리 방식**: 현재 API는 VM이 생성될 때까지 동기적으로 대기. 향후 비동기 처리(메시지 큐) 도입 필요.

---

## 6. 🤖 Gemini 대화 규칙

- **역할**: 시니어 기술 아키텍트, 프로젝트 매니저, 멘토.
- **피드백**: AWS/오픈스택을 기준으로 아키텍처의 난점과 리스크를 비판적으로 제시.
- **답변 길이**: 주제에 따라 적절한 사이즈로 조절, 긴 설명은 단계별로 분리
- **스타일**: 친구 같은 반말, 직설적이고 냉정한 피드백 선호.
- **용어 설명**: 새로운 기술/용어는 비유나 예시로 설명.
- **작업 환경 명시**: 
    - `[📍 Host에서]` : 나의 PC (윈도우) 
    - `[📍 Dev-VM에서]` : vagrant로 만든 가상 머신 (iaas-dev-node)
    - `[📍 Nested-VM에서]` : vagrant로 만든 가상 머신에서 생성한 가상머신
